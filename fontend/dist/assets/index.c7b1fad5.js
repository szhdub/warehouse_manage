import{g as e,p as l,a as t,d as a}from"./index.c283ea82.js";import{p as o,l as d,s as u,r,m as p,o as s,e as n,w as c,g as y,v as m,A as i,h as f,E as v,f as g,F as C}from"./vendor.15027bbd.js";o("data-v-194387c0");const k={class:"dialog-footer"},h=f("取消"),V=f("确定");d();const _={emits:["ok"],setup(t,{expose:a,emit:o}){const d=u(!1),f=r({parentId:"",typeCode:"",typeName:"",typeDesc:""}),g=r({typeCode:[{validator:async(l,t,a)=>{if(""===(t=t.trim()))return a(new Error("请输入分类编码！"));return!!(await e(`/productCategory/verify-type-code?typeCode=${t}`)).data||a(new Error("该分类编码已存在！"))},trigger:"blur"}],typeName:[{required:!0,message:"分类名称不能为空！",trigger:"blur"}]}),C=()=>{for(let e in f)f[e]="";d.value=!1},_=u(),b=()=>{_.value.validate((e=>{e&&l("/productCategory/type-add",f).then((e=>{o("ok"),v.success(e.message),d.value=!1}))}))};return a({open:e=>{d.value=!0,f.parentId=e?e.typeId:0}}),(e,l)=>{const t=p("el-input"),a=p("el-form-item"),o=p("el-form"),u=p("el-button"),r=p("el-dialog");return s(),n(r,{modelValue:d.value,"onUpdate:modelValue":l[3]||(l[3]=e=>d.value=e),title:"添加商品分类",width:"40%",onClose:C,"destroy-on-close":""},{footer:c((()=>[y("span",k,[m(u,{onClick:C},{default:c((()=>[h])),_:1}),m(u,{type:"primary",onClick:b},{default:c((()=>[V])),_:1})])])),default:c((()=>[m(o,{ref:_,model:i(f),rules:i(g),"label-position":"right","label-width":"100px"},{default:c((()=>[m(a,{label:"分类编码：",prop:"typeCode"},{default:c((()=>[m(t,{modelValue:i(f).typeCode,"onUpdate:modelValue":l[0]||(l[0]=e=>i(f).typeCode=e)},null,8,["modelValue"])])),_:1}),m(a,{label:"分类名称：",prop:"typeName"},{default:c((()=>[m(t,{modelValue:i(f).typeName,"onUpdate:modelValue":l[1]||(l[1]=e=>i(f).typeName=e)},null,8,["modelValue"])])),_:1}),m(a,{label:"分类描述：",prop:"typeDesc"},{default:c((()=>[m(t,{type:"textarea",rows:"4",modelValue:i(f).typeDesc,"onUpdate:modelValue":l[2]||(l[2]=e=>i(f).typeDesc=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])}},__scopeId:"data-v-194387c0"};o("data-v-7c786c06");const b={class:"dialog-footer"},w=f("取消"),I=f("确定");d();const N={emits:["ok"],setup(e,{expose:l,emit:a}){const o=u(!1),d=r({typeId:"",typeCode:"",typeName:"",typeDesc:""}),f=r({typeName:[{required:!0,message:"分类名称不能为空！",trigger:"blur"}]}),g=()=>{o.value=!1},C=u(),k=()=>{C.value.validate((e=>{e&&t("/productCategory/type-update",d).then((e=>{a("ok"),v.success(e.message),o.value=!1}))}))};return l({open:e=>{o.value=!0;for(let l in e)d[l]=e[l]}}),(e,l)=>{const t=p("el-input"),a=p("el-form-item"),u=p("el-form"),r=p("el-button"),v=p("el-dialog");return s(),n(v,{modelValue:o.value,"onUpdate:modelValue":l[3]||(l[3]=e=>o.value=e),title:"修改商品分类",width:"40%",onClose:g,"destroy-on-close":""},{footer:c((()=>[y("span",b,[m(r,{onClick:g},{default:c((()=>[w])),_:1}),m(r,{type:"primary",onClick:k},{default:c((()=>[I])),_:1})])])),default:c((()=>[m(u,{ref:C,model:i(d),rules:i(f),"label-position":"right","label-width":"100px"},{default:c((()=>[m(a,{label:"分类编码：",prop:"typeCode"},{default:c((()=>[m(t,{modelValue:i(d).typeCode,"onUpdate:modelValue":l[0]||(l[0]=e=>i(d).typeCode=e),disabled:""},null,8,["modelValue"])])),_:1}),m(a,{label:"分类名称：",prop:"typeName"},{default:c((()=>[m(t,{modelValue:i(d).typeName,"onUpdate:modelValue":l[1]||(l[1]=e=>i(d).typeName=e)},null,8,["modelValue"])])),_:1}),m(a,{label:"分类描述：",prop:"typeDesc"},{default:c((()=>[m(t,{type:"textarea",rows:"4",modelValue:i(d).typeDesc,"onUpdate:modelValue":l[2]||(l[2]=e=>i(d).typeDesc=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])}},__scopeId:"data-v-7c786c06"};o("data-v-c11f9406");const x={style:{"padding-bottom":"20px"}},D=f("添加分类"),U=f("修改分类"),K=f("删除分类");d();const E={setup(l){const t=u(),o={children:"childProductCategory",label:"typeName"},d=u(),r=()=>{e("/productCategory/product-category-tree").then((e=>{d.value=e.data,n.value.setCheckedKeys([]),t.value=null}))};r();const n=u(),i=(e,l)=>{l.checkedKeys.length>0?(n.value.setCheckedKeys([e.typeId]),t.value=e):t.value=null},f=u(),k=()=>{t.value&&0!=t.value.parentId?v.error("该分类已是最小分类，不能添加子分类！"):f.value.open(t.value)},h=u(),V=()=>{t.value?h.value.open(t.value):v.error("请选择一个商品分类！")},b=()=>{a(`/productCategory/type-delete/${t.value.typeId}`,null,{title:"提示",message:"您确定删除该分类及其子分类吗？"}).then((e=>{v.success(e.message),r()}))};return(e,l)=>{const t=p("el-button"),a=p("el-tree");return s(),g(C,null,[y("div",x,[m(t,{type:"primary",onClick:k},{default:c((()=>[D])),_:1}),m(t,{type:"primary",onClick:V},{default:c((()=>[U])),_:1}),m(t,{type:"danger",onClick:b},{default:c((()=>[K])),_:1})]),m(a,{ref:n,data:d.value,props:o,"node-key":"typeId",onCheck:i,"default-checked-keys":e.checkedKeys,"show-checkbox":"","check-strictly":""},null,8,["data","default-checked-keys"]),m(_,{ref:f,onOk:r},null,512),m(N,{ref:h,onOk:r},null,512)],64)}},__scopeId:"data-v-c11f9406"};export default E;
