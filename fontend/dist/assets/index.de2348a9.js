import{p as e,l,s as a,r as t,m as u,o,e as d,w as r,g as p,v as n,A as s,f as m,H as i,x as c,F as b,h as f,E as y,t as v,u as g,_ as V,y as _,j as I}from"./vendor.15027bbd.js";import{W as h,p as N,a as w,g as k,e as U,d as x}from"./index.c283ea82.js";e("data-v-3d5f8d41");const D=["src"],C=f("元 "),P=f("元 "),q=f("元 "),S={class:"dialog-footer"},z=f("取消"),j=f("确定");l();const O={emits:["ok"],setup(e,{expose:l,emit:f}){const v=a(!1),g=a(""),V=e=>{const l=new FileReader,a=e.raw;l.readAsDataURL(a),l.onload=()=>{g.value=l.result,I.imgs=a.name}},_=e=>"image/jpg"!==e.type&&"image/jpeg"!==e.type&&"image/png"!==e.type&&"image/gif"!==e.type&&"image/svg"!==e.type&&"image/webp"!==e.type?(y.error("只能上传图片格式!"),!1):!(e.size/1024/1024>5)||(y.error("上传文件不能大于5MB!"),!1),I=t({imgs:"",productName:"",storeId:"",brandId:"",productNum:"",productInvent:0,typeId:"",typeName:"",supplyId:"",placeId:"",unitId:"",introduce:"",inPrice:0,salePrice:0,memPrice:0,productDate:"",suppDate:""}),w=t({productName:[{required:!0,message:"请输入商品名称",trigger:"blur"}],storeId:[{required:!0,message:"请选择仓库",trigger:"blur"}],brandId:[{required:!0,message:"请选择品牌",trigger:"blur"}],productNum:[{required:!0,message:"请输入商品编号",trigger:"blur"}],supplyId:[{required:!0,message:"请选择供应商",trigger:"blur"}],placeId:[{required:!0,message:"请选择产地",trigger:"blur"}],unitId:[{required:!0,message:"请选择单位",trigger:"blur"}]}),k=()=>{for(let e in I)I[e]="";v.value=!1},U=a(),x=a(),O=a(),E=a(),H=a(),M=a(),B={children:"childProductCategory",label:"typeName"},F=e=>{e&&0!=e.parentId&&(I.typeId=e.typeId,I.typeName=e.typeName)},L=a(),R=()=>{L.value.validate((e=>{e&&N("/product/product-add",I).then((e=>{f("ok"),y.success(e.message),v.value=!1}))}))};return l({open:(e,l,a,t,u,o)=>{v.value=!0,U.value=e.value,x.value=l.value,O.value=a.value,E.value=t.value,H.value=u.value,M.value=o.value}}),(e,l)=>{const a=u("el-icon"),t=u("el-upload"),f=u("el-form-item"),y=u("el-input"),N=u("el-row"),A=u("el-tree"),$=u("el-popover"),G=u("el-input-number"),T=u("el-option"),W=u("el-select"),J=u("el-form"),K=u("el-button"),Q=u("el-dialog");return o(),d(Q,{modelValue:v.value,"onUpdate:modelValue":l[15]||(l[15]=e=>v.value=e),title:"添加商品",width:"50%",onClose:k,"destroy-on-close":""},{footer:r((()=>[p("span",S,[n(K,{onClick:k},{default:r((()=>[z])),_:1}),n(K,{type:"primary",onClick:R},{default:r((()=>[j])),_:1})])])),default:r((()=>[n(J,{ref:L,model:s(I),rules:s(w),"label-position":"right","label-width":"100px"},{default:r((()=>[n(f,{label:"商品图片：",prop:"imgs"},{default:r((()=>[n(t,{class:"avatar-uploader",action:s(h)+"/product/img-upload","show-file-list":!1,"on-change":V,"before-upload":_},{default:r((()=>[g.value?(o(),m("img",{key:0,src:g.value,class:"avatar"},null,8,D)):(o(),d(a,{key:1,class:"avatar-uploader-icon"},{default:r((()=>[n(s(i))])),_:1}))])),_:1},8,["action"])])),_:1}),n(N,null,{default:r((()=>[n(f,{label:"名称：",prop:"productName"},{default:r((()=>[n(y,{modelValue:s(I).productName,"onUpdate:modelValue":l[0]||(l[0]=e=>s(I).productName=e)},null,8,["modelValue"])])),_:1}),n(f,{label:"编号：",prop:"productNum"},{default:r((()=>[n(y,{modelValue:s(I).productNum,"onUpdate:modelValue":l[1]||(l[1]=e=>s(I).productNum=e)},null,8,["modelValue"])])),_:1})])),_:1}),n(N,null,{default:r((()=>[n(f,{label:"种类：",prop:"typeId"},{default:r((()=>[n($,{trigger:"click",placement:"bottom-start",width:"12%"},{reference:r((()=>[n(y,{modelValue:s(I).typeName,"onUpdate:modelValue":l[2]||(l[2]=e=>s(I).typeName=e),placeholder:"选择类型",readonly:""},null,8,["modelValue"])])),default:r((()=>[n(A,{"node-key":e.typeId,data:O.value,props:B,onNodeClick:F},null,8,["node-key","data"])])),_:1})])),_:1}),n(f,{label:"库存：",prop:"productInvent"},{default:r((()=>[n(G,{modelValue:s(I).productInvent,"onUpdate:modelValue":l[3]||(l[3]=e=>s(I).productInvent=e),min:"0"},null,8,["modelValue"])])),_:1})])),_:1}),n(N,null,{default:r((()=>[n(f,{label:"品牌：",prop:"brandId"},{default:r((()=>[n(W,{placeholder:"请选择品牌",modelValue:s(I).brandId,"onUpdate:modelValue":l[4]||(l[4]=e=>s(I).brandId=e),clearable:""},{default:r((()=>[(o(!0),m(b,null,c(x.value,(e=>(o(),d(T,{label:e.brandName,value:e.brandId,key:e.brandId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),n(f,{label:"仓库：",prop:"storeId"},{default:r((()=>[n(W,{placeholder:"请选择仓库",modelValue:s(I).storeId,"onUpdate:modelValue":l[5]||(l[5]=e=>s(I).storeId=e),clearable:""},{default:r((()=>[(o(!0),m(b,null,c(U.value,(e=>(o(),d(T,{label:e.storeName,value:e.storeId,key:e.storeId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),n(N,null,{default:r((()=>[n(f,{label:"供应商：",prop:"supplyId"},{default:r((()=>[n(W,{placeholder:"请选择供应商",modelValue:s(I).supplyId,"onUpdate:modelValue":l[6]||(l[6]=e=>s(I).supplyId=e),clearable:""},{default:r((()=>[(o(!0),m(b,null,c(E.value,(e=>(o(),d(T,{label:e.supplyName,value:e.supplyId,key:e.supplyId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),n(f,{label:"产地：",prop:"placeId"},{default:r((()=>[n(W,{placeholder:"请选择产地",modelValue:s(I).placeId,"onUpdate:modelValue":l[7]||(l[7]=e=>s(I).placeId=e),clearable:""},{default:r((()=>[(o(!0),m(b,null,c(H.value,(e=>(o(),d(T,{label:e.placeName,value:e.placeId,key:e.placeId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),n(N,null,{default:r((()=>[n(f,{label:"单位：",prop:"unitId"},{default:r((()=>[n(W,{placeholder:"请选择单位",modelValue:s(I).unitId,"onUpdate:modelValue":l[8]||(l[8]=e=>s(I).unitId=e),clearable:""},{default:r((()=>[(o(!0),m(b,null,c(M.value,(e=>(o(),d(T,{label:e.unitName,value:e.unitId,key:e.unitId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),n(N,null,{default:r((()=>[n(f,{label:"进价：",prop:"inPrice"},{default:r((()=>[n(y,{modelValue:s(I).inPrice,"onUpdate:modelValue":l[9]||(l[9]=e=>s(I).inPrice=e),style:{width:"90%"}},null,8,["modelValue"]),C])),_:1}),n(f,{label:"售价：",prop:"salePrice"},{default:r((()=>[n(y,{modelValue:s(I).salePrice,"onUpdate:modelValue":l[10]||(l[10]=e=>s(I).salePrice=e),style:{width:"90%"}},null,8,["modelValue"]),P])),_:1})])),_:1}),n(N,null,{default:r((()=>[n(f,{label:"会员价：",prop:"memPrice"},{default:r((()=>[n(y,{modelValue:s(I).memPrice,"onUpdate:modelValue":l[11]||(l[11]=e=>s(I).memPrice=e),style:{width:"90%"}},null,8,["modelValue"]),q])),_:1})])),_:1}),n(f,{label:"详细介绍：",prop:"introduce",style:{width:"88%"}},{default:r((()=>[n(y,{type:"textarea",rows:"2",modelValue:s(I).introduce,"onUpdate:modelValue":l[12]||(l[12]=e=>s(I).introduce=e)},null,8,["modelValue"])])),_:1}),n(N,null,{default:r((()=>[n(f,{label:"生产日期：",prop:"productDate"},{default:r((()=>[n(y,{type:"date",modelValue:s(I).productDate,"onUpdate:modelValue":l[13]||(l[13]=e=>s(I).productDate=e)},null,8,["modelValue"])])),_:1}),n(f,{label:"保质期：",prop:"suppDate"},{default:r((()=>[n(y,{type:"date",modelValue:s(I).suppDate,"onUpdate:modelValue":l[14]||(l[14]=e=>s(I).suppDate=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])}},__scopeId:"data-v-3d5f8d41"};e("data-v-3514572f");const E=["src"],H=f("元 "),M=f("元 "),B=f("元 "),F={class:"dialog-footer"},L=f("取消"),R=f("确定");l();const A={emits:["ok"],setup(e,{expose:l,emit:f}){const v=a(!1),g=a(""),V=e=>{const l=new FileReader,a=e.raw;l.readAsDataURL(a),l.onload=()=>{g.value=l.result,I.imgs=a.name}},_=e=>"image/jpg"!==e.type&&"image/jpeg"!==e.type&&"image/png"!==e.type&&"image/gif"!==e.type&&"image/svg"!==e.type&&"image/webp"!==e.type?(y.error("只能上传图片格式!"),!1):!(e.size/1024/1024>5)||(y.error("上传文件不能大于5MB!"),!1),I=t({imgs:"",productId:"",productName:"",storeId:"",brandId:"",productNum:"",productInvent:0,typeId:"",typeName:"",supplyId:"",placeId:"",unitId:"",introduce:"",inPrice:0,salePrice:0,memPrice:0,productDate:"",suppDate:""}),N=t({productName:[{required:!0,message:"请输入商品名称",trigger:"blur"}],storeId:[{required:!0,message:"请选择仓库",trigger:"blur"}],brandId:[{required:!0,message:"请选择品牌",trigger:"blur"}],productNum:[{required:!0,message:"请输入商品编号",trigger:"blur"}],supplyId:[{required:!0,message:"请选择供应商",trigger:"blur"}],placeId:[{required:!0,message:"请选择产地",trigger:"blur"}],unitId:[{required:!0,message:"请选择单位",trigger:"blur"}]}),k=()=>{v.value=!1},U=a(),x=a(),D=a(),C=a(),P=a(),q=a(),S={children:"childGoodsCategory",label:"typeName"},z=e=>{e&&0!=e.parentId&&(I.typeId=e.typeId,I.typeName=e.typeName)},j=a(),O=()=>{j.value.validate((e=>{e&&w("/product/product-update",I).then((e=>{f("ok"),y.success(e.message),v.value=!1}))}))};return l({open:(e,l,a,t,u,o,d)=>{v.value=!0,g.value=h+e.imgs;for(let r in e)I[r]=e[r];U.value=l.value,x.value=a.value,D.value=t.value,C.value=u.value,P.value=o.value,q.value=d.value}}),(e,l)=>{const a=u("el-icon"),t=u("el-upload"),f=u("el-form-item"),y=u("el-input"),w=u("el-row"),A=u("el-tree"),$=u("el-popover"),G=u("el-input-number"),T=u("el-option"),W=u("el-select"),J=u("el-form"),K=u("el-button"),Q=u("el-dialog");return o(),d(Q,{modelValue:v.value,"onUpdate:modelValue":l[15]||(l[15]=e=>v.value=e),title:"修改商品",width:"50%",onClose:k,"destroy-on-close":""},{footer:r((()=>[p("span",F,[n(K,{onClick:k},{default:r((()=>[L])),_:1}),n(K,{type:"primary",onClick:O},{default:r((()=>[R])),_:1})])])),default:r((()=>[n(J,{ref:j,model:s(I),rules:s(N),"label-position":"right","label-width":"100px"},{default:r((()=>[n(f,{label:"商品图片：",prop:"imgs"},{default:r((()=>[n(t,{class:"avatar-uploader",action:s(h)+"/product/img-upload","show-file-list":!1,"on-change":V,"before-upload":_},{default:r((()=>[g.value?(o(),m("img",{key:0,src:g.value,class:"avatar"},null,8,E)):(o(),d(a,{key:1,class:"avatar-uploader-icon"},{default:r((()=>[n(s(i))])),_:1}))])),_:1},8,["action"])])),_:1}),n(w,null,{default:r((()=>[n(f,{label:"名称：",prop:"productName"},{default:r((()=>[n(y,{modelValue:s(I).productName,"onUpdate:modelValue":l[0]||(l[0]=e=>s(I).productName=e)},null,8,["modelValue"])])),_:1}),n(f,{label:"编号：",prop:"productNum"},{default:r((()=>[n(y,{modelValue:s(I).productNum,"onUpdate:modelValue":l[1]||(l[1]=e=>s(I).productNum=e)},null,8,["modelValue"])])),_:1})])),_:1}),n(w,null,{default:r((()=>[n(f,{label:"种类：",prop:"typeId"},{default:r((()=>[n($,{trigger:"click",placement:"bottom-start",width:"12%"},{reference:r((()=>[n(y,{modelValue:s(I).typeName,"onUpdate:modelValue":l[2]||(l[2]=e=>s(I).typeName=e),placeholder:"选择类型",readonly:""},null,8,["modelValue"])])),default:r((()=>[n(A,{"node-key":e.typeId,data:D.value,props:S,onNodeClick:z},null,8,["node-key","data"])])),_:1})])),_:1}),n(f,{label:"库存：",prop:"productInvent"},{default:r((()=>[n(G,{modelValue:s(I).productInvent,"onUpdate:modelValue":l[3]||(l[3]=e=>s(I).productInvent=e),min:"0"},null,8,["modelValue"])])),_:1})])),_:1}),n(w,null,{default:r((()=>[n(f,{label:"品牌：",prop:"brandId"},{default:r((()=>[n(W,{placeholder:"请选择品牌",modelValue:s(I).brandId,"onUpdate:modelValue":l[4]||(l[4]=e=>s(I).brandId=e),clearable:""},{default:r((()=>[(o(!0),m(b,null,c(x.value,(e=>(o(),d(T,{label:e.brandName,value:e.brandId,key:e.brandId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),n(f,{label:"仓库：",prop:"storeId"},{default:r((()=>[n(W,{placeholder:"请选择仓库",modelValue:s(I).storeId,"onUpdate:modelValue":l[5]||(l[5]=e=>s(I).storeId=e),clearable:""},{default:r((()=>[(o(!0),m(b,null,c(U.value,(e=>(o(),d(T,{label:e.storeName,value:e.storeId,key:e.storeId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),n(w,null,{default:r((()=>[n(f,{label:"供应商：",prop:"supplyId"},{default:r((()=>[n(W,{placeholder:"请选择供应商",modelValue:s(I).supplyId,"onUpdate:modelValue":l[6]||(l[6]=e=>s(I).supplyId=e),clearable:""},{default:r((()=>[(o(!0),m(b,null,c(C.value,(e=>(o(),d(T,{label:e.supplyName,value:e.supplyId,key:e.supplyId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),n(f,{label:"产地：",prop:"placeId"},{default:r((()=>[n(W,{placeholder:"请选择产地",modelValue:s(I).placeId,"onUpdate:modelValue":l[7]||(l[7]=e=>s(I).placeId=e),clearable:""},{default:r((()=>[(o(!0),m(b,null,c(P.value,(e=>(o(),d(T,{label:e.placeName,value:e.placeId,key:e.placeId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),n(w,null,{default:r((()=>[n(f,{label:"单位：",prop:"unitId"},{default:r((()=>[n(W,{placeholder:"请选择单位",modelValue:s(I).unitId,"onUpdate:modelValue":l[8]||(l[8]=e=>s(I).unitId=e),clearable:""},{default:r((()=>[(o(!0),m(b,null,c(q.value,(e=>(o(),d(T,{label:e.unitName,value:e.unitId,key:e.unitId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),n(w,null,{default:r((()=>[n(f,{label:"进价：",prop:"inPrice"},{default:r((()=>[n(y,{modelValue:s(I).inPrice,"onUpdate:modelValue":l[9]||(l[9]=e=>s(I).inPrice=e),style:{width:"90%"}},null,8,["modelValue"]),H])),_:1}),n(f,{label:"售价：",prop:"salePrice"},{default:r((()=>[n(y,{modelValue:s(I).salePrice,"onUpdate:modelValue":l[10]||(l[10]=e=>s(I).salePrice=e),style:{width:"90%"}},null,8,["modelValue"]),M])),_:1})])),_:1}),n(w,null,{default:r((()=>[n(f,{label:"会员价：",prop:"memPrice"},{default:r((()=>[n(y,{modelValue:s(I).memPrice,"onUpdate:modelValue":l[11]||(l[11]=e=>s(I).memPrice=e),style:{width:"90%"}},null,8,["modelValue"]),B])),_:1})])),_:1}),n(f,{label:"详细介绍：",prop:"introduce",style:{width:"88%"}},{default:r((()=>[n(y,{type:"textarea",rows:"2",modelValue:s(I).introduce,"onUpdate:modelValue":l[12]||(l[12]=e=>s(I).introduce=e)},null,8,["modelValue"])])),_:1}),n(w,null,{default:r((()=>[n(f,{label:"生产日期：",prop:"productDate"},{default:r((()=>[n(y,{type:"date",modelValue:s(I).productDate,"onUpdate:modelValue":l[13]||(l[13]=e=>s(I).productDate=e)},null,8,["modelValue"])])),_:1}),n(f,{label:"保质期：",prop:"suppDate"},{default:r((()=>[n(y,{type:"date",modelValue:s(I).suppDate,"onUpdate:modelValue":l[14]||(l[14]=e=>s(I).suppDate=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])}},__scopeId:"data-v-3514572f"},$={class:"dialog-footer"},G=f("取消"),T=f("确定"),W={emits:["ok"],setup(e,{expose:l,emit:m}){const i=a(!1),c=t({productId:"",productName:"",storeId:"",storeName:"",supplyId:"",supplyName:"",placeId:"",placeName:"",buyNum:"",buyUser:"",phone:""}),b=t({buyNum:[{required:!0,message:"请输入采购数量",trigger:"blur"},{min:1,max:7,message:"采购数量不能多于7位数",trigger:"blur"}],buyUser:[{required:!0,message:"请输入采购人",trigger:"blur"}],phone:[{validator:(e,l,a)=>""===l?a(new Error("请输入采购人电话！")):!!/^\d{11}$/.test(l)||a(new Error("电话号码必须为11位的数字！")),trigger:"blur"}]}),f=()=>{for(let e in c)c[e]="";i.value=!1},g=a(),V=()=>{g.value.validate((e=>{e&&N("/purchase/purchase-add",c).then((e=>{m("ok",c.storeId),y.success(e.message),i.value=!1}))}))};return l({open:e=>{i.value=!0;for(let l in e)c[l]=e[l]}}),(e,l)=>{const a=u("el-form-item"),t=u("el-input"),m=u("el-form"),y=u("el-button"),_=u("el-dialog");return o(),d(_,{modelValue:i.value,"onUpdate:modelValue":l[3]||(l[3]=e=>i.value=e),title:"添加采购单",width:"600px",onClose:f,"destroy-on-close":""},{footer:r((()=>[p("span",$,[n(y,{onClick:f},{default:r((()=>[G])),_:1}),n(y,{type:"primary",onClick:V},{default:r((()=>[T])),_:1})])])),default:r((()=>[n(m,{ref:g,model:s(c),rules:s(b),"label-position":"right","label-width":"120px"},{default:r((()=>[n(a,{label:"商品：",prop:"productName"},{default:r((()=>[p("span",null,v(s(c).productName),1)])),_:1}),n(a,{label:"仓库：",prop:"storeName"},{default:r((()=>[p("span",null,v(s(c).storeName),1)])),_:1}),n(a,{label:"供货商：",prop:"supplyName"},{default:r((()=>[p("span",null,v(s(c).supplyName),1)])),_:1}),n(a,{label:"产地：",prop:"placeName"},{default:r((()=>[p("span",null,v(s(c).placeName),1)])),_:1}),n(a,{label:"预计采购量：",prop:"buyNum"},{default:r((()=>[n(t,{modelValue:s(c).buyNum,"onUpdate:modelValue":l[0]||(l[0]=e=>s(c).buyNum=e)},null,8,["modelValue"])])),_:1}),n(a,{label:"采购人：",prop:"buyUser"},{default:r((()=>[n(t,{modelValue:s(c).buyUser,"onUpdate:modelValue":l[1]||(l[1]=e=>s(c).buyUser=e)},null,8,["modelValue"])])),_:1}),n(a,{label:"采购人电话：",prop:"phone"},{default:r((()=>[n(t,{modelValue:s(c).phone,"onUpdate:modelValue":l[2]||(l[2]=e=>s(c).phone=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])}}},J={class:"dialog-footer"},K=f("取消"),Q=f("确定"),X={emits:["ok"],setup(e,{expose:l,emit:m}){const i=a(!1),c=t({productId:"",productName:"",storeId:"",storeName:"",productInvent:"",outNum:""}),b=t({outNum:[{validator:(e,l,a)=>{if(""===l)return a(new Error("请输入出库数量！"));const t=parseInt(c.productInvent);return parseInt(l)<=0?a(new Error("出库数量必须大于0！")):!(parseInt(l)>t)||a(new Error("出库数量不能大于库存！"))},trigger:"blur"}]}),f=()=>{c.outNum="",i.value=!1},v=a(),g=()=>{v.value.validate((e=>{e&&(N("/outstore/outstore-add",c).then((e=>{m("ok",c.storeId),y.success(e.message)})),i.value=!1)}))};return l({open:e=>{i.value=!0;for(let l in e)c[l]=e[l]}}),(e,l)=>{const a=u("el-input"),t=u("el-form-item"),m=u("el-form"),y=u("el-button"),V=u("el-dialog");return o(),d(V,{modelValue:i.value,"onUpdate:modelValue":l[4]||(l[4]=e=>i.value=e),title:"添加出库单",width:"400px",onClose:f,"destroy-on-close":""},{footer:r((()=>[p("span",J,[n(y,{onClick:f},{default:r((()=>[K])),_:1}),n(y,{type:"primary",onClick:g},{default:r((()=>[Q])),_:1})])])),default:r((()=>[n(m,{ref:v,model:s(c),rules:s(b),"label-position":"top","label-width":"120px"},{default:r((()=>[n(t,{label:"商品名称：",prop:"productName"},{default:r((()=>[n(a,{modelValue:s(c).productName,"onUpdate:modelValue":l[0]||(l[0]=e=>s(c).productName=e),disabled:""},null,8,["modelValue"])])),_:1}),n(t,{label:"仓库名称：",prop:"storeName"},{default:r((()=>[n(a,{modelValue:s(c).storeName,"onUpdate:modelValue":l[1]||(l[1]=e=>s(c).storeName=e),disabled:""},null,8,["modelValue"])])),_:1}),n(t,{label:"库存：",prop:"productInvent"},{default:r((()=>[n(a,{modelValue:s(c).productInvent,"onUpdate:modelValue":l[2]||(l[2]=e=>s(c).productInvent=e),disabled:""},null,8,["modelValue"])])),_:1}),n(t,{label:"出库数量：",prop:"outNum"},{default:r((()=>[n(a,{modelValue:s(c).outNum,"onUpdate:modelValue":l[3]||(l[3]=e=>s(c).outNum=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])}}};e("data-v-cf4312f0");const Y=p("svg",{t:"1646977561352",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3057",width:"200",height:"200"},[p("path",{d:"M986.304 871.424L747.328 630.4c-2.816-2.752-5.888-4.928-8.768-7.232 40.32-62.464 63.936-136.832 63.936-216.96 0-220.16-176.96-398.592-395.392-398.592C188.8 7.616 11.712 186.048 11.712 406.208s177.088 398.592 395.392 398.592a391.232 391.232 0 0 0 215.36-64.576c2.24 3.072 4.352 6.08 7.04 8.832l239.04 241.024a82.688 82.688 0 0 0 117.76 0 84.48 84.48 0 0 0 0-118.656m-579.2-192.512c-149.12 0-270.528-122.368-270.528-272.704 0-150.4 121.344-272.768 270.528-272.768 149.12 0 270.528 122.432 270.528 272.768 0 150.4-121.408 272.704-270.528 272.704","p-id":"3058"})],-1),Z=f("  查  询 "),ee=p("svg",{t:"1646977404025",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2197",width:"200",height:"200"},[p("path",{d:"M925.696 384q19.456 0 37.376 7.68t30.72 20.48 20.48 30.72 7.68 37.376q0 20.48-7.68 37.888t-20.48 30.208-30.72 20.48-37.376 7.68l-287.744 0 0 287.744q0 20.48-7.68 37.888t-20.48 30.208-30.72 20.48-37.376 7.68q-20.48 0-37.888-7.68t-30.208-20.48-20.48-30.208-7.68-37.888l0-287.744-287.744 0q-20.48 0-37.888-7.68t-30.208-20.48-20.48-30.208-7.68-37.888q0-19.456 7.68-37.376t20.48-30.72 30.208-20.48 37.888-7.68l287.744 0 0-287.744q0-19.456 7.68-37.376t20.48-30.72 30.208-20.48 37.888-7.68q39.936 0 68.096 28.16t28.16 68.096l0 287.744 287.744 0z","p-id":"2198"})],-1),le=f("  添加商品 "),ae=p("svg",{t:"1647313957290",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2289",width:"200",height:"200"},[p("path",{d:"M395.9 406H288.5c-2.8 0-5.7-0.7-8.1-2.4-18.4-13.1-18.2-34.3-6.4-46.3l217.6-220.9c11.1-11.2 29.2-11.4 40.4-0.3l0.3 0.3 217.7 221c11.1 11.3 10.9 29.4-0.4 40.4-5.3 5.2-12.5 8.2-19.9 8.2H628.1v215.7c0 7.9-6.4 14.3-14.3 14.3H410.2c-7.9 0-14.3-6.4-14.3-14.3V406zM283.3 652.4v87.5c0 7.9 6.4 14.3 14.3 14.3h428.8c7.9 0 14.3-6.4 14.3-14.3v-87.5c0-7.9 6.4-14.3 14.3-14.3h142.9c7.9 0 14.3 6.4 14.3 14.3V914c0 7.9-6.4 14.3-14.3 14.3H126.1c-7.9 0-14.3-6.4-14.3-14.3V652.4c0-7.9 6.4-14.3 14.3-14.3H269c7.9 0 14.3 6.4 14.3 14.3z","p-id":"2290"})],-1),te=f("  导出数据 "),ue=f("调货"),oe={style:{float:"left"}},de=p("span",{style:{"padding-left":"6px",position:"relative",top:"-2px"}},"删除",-1),re=f("修改"),pe=f("删除"),ne=f("上架"),se=f("下架"),me=f("采购"),ie=f("出库"),ce=f("盘点");l();const be={setup(e){const l=g(),i=t({storeId:1,productName:"",brandName:"",typeName:"",supplyName:"",placeName:"",upDownState:"",isOverDate:"",pageSize:5,pageNum:1,totalNum:0}),f=a(),N=()=>{k("/product/product-page-list",i).then((e=>{f.value=e.data.resultList,i.totalNum=e.data.totalNum}))};N();const D=a();k("/product/store-list").then((e=>{D.value=e.data}));const C=a();k("/product/brand-list").then((e=>{C.value=e.data}));const P=a();k("/product/category-tree").then((e=>{P.value=e.data}));const q=a();k("/product/supply-list").then((e=>{q.value=e.data}));const S=a();k("/product/place-list").then((e=>{S.value=e.data}));const z=a();k("/product/unit-list").then((e=>{z.value=e.data}));const j=a(),E=a([]),H=e=>{E.value=e},M=()=>{k("/product/exportTable",i).then((e=>{const l=e.data;l.reduce(((e,l)=>(l.upDownState=0==l.upDownState?"未上架":"已上架",e)),[]);U([{title:"商品ID",key:"productId"},{title:"商品名称",key:"productName"},{title:"品牌",key:"brandName"},{title:"类型",key:"typeName"},{title:"供应商",key:"supplyName"},{title:"产地",key:"placeName"},{title:"仓库",key:"storeName"},{title:"库存",key:"productInvent"},{title:"上/架",key:"upDownState"},{title:"售价",key:"salePrice"},{title:"单位",key:"unitName"},{title:"生产日期",key:"productDate"},{title:"保质期",key:"suppDate"}],l,"商品信息表")}))},B=()=>{l.push({path:"/transshipment/transfer",query:{storeId:i.storeId}})},F=a(),L=a(),R=a(),$=a(),G=e=>{l.push({path:"/purchase/index",query:{storeId:e}})},T=e=>{l.push({path:"/outstore/index",query:{storeId:e}})},J=()=>{if(E.value.length){const e=E.value.reduce(((e,l)=>(e.push(l.productId),e)),[]);x("/product/product-list-delete",e).then((e=>{y.success(e.message),N()}))}else y.error("请选择需要删除的行！")},K=(e,l)=>{w("/product/state-change",{productId:e,upDownState:l}).then((e=>{y.success(e.message),N()}))},Q=(e,l)=>{l(e?C.value.filter(be(e)):C.value)},be=e=>l=>-1!=l.brandName.indexOf(e),fe=e=>{i.pageSize=e,N()},ye=e=>{i.pageNum=e,N()};return(e,l)=>{const a=u("el-option"),t=u("el-select"),g=u("el-form-item"),w=u("el-input"),k=u("el-autocomplete"),U=u("el-icon"),E=u("el-button"),be=u("el-form"),ve=u("el-table-column"),ge=u("el-image"),Ve=u("el-link"),_e=u("el-table"),Ie=u("el-pagination");return o(),m(b,null,[p("div",null,[n(be,{class:"searchForm"},{default:r((()=>[n(g,null,{default:r((()=>[n(t,{modelValue:s(i).storeId,"onUpdate:modelValue":l[0]||(l[0]=e=>s(i).storeId=e),style:{width:"120px"},clearable:""},{default:r((()=>[(o(!0),m(b,null,c(D.value,(e=>(o(),d(a,{label:e.storeName,value:e.storeId,key:e.storeId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),n(g,{style:{"margin-left":"10px"}},{default:r((()=>[n(w,{modelValue:s(i).productName,"onUpdate:modelValue":l[1]||(l[1]=e=>s(i).productName=e),placeholder:"商品名称",style:{width:"120px"},clearable:""},null,8,["modelValue"])])),_:1}),n(g,{style:{"margin-left":"10px"}},{default:r((()=>[n(k,{modelValue:s(i).brandName,"onUpdate:modelValue":l[2]||(l[2]=e=>s(i).brandName=e),"fetch-suggestions":Q,"value-key":"brandName",clearable:"",placeholder:"品牌",style:{width:"120px"}},null,8,["modelValue"])])),_:1}),n(g,{style:{"margin-left":"10px"}},{default:r((()=>[n(w,{modelValue:s(i).typeName,"onUpdate:modelValue":l[3]||(l[3]=e=>s(i).typeName=e),placeholder:"类型",style:{width:"120px"},clearable:""},null,8,["modelValue"])])),_:1}),n(g,{style:{"margin-left":"10px"}},{default:r((()=>[n(w,{modelValue:s(i).supplyName,"onUpdate:modelValue":l[4]||(l[4]=e=>s(i).supplyName=e),placeholder:"供应商",style:{width:"120px"},clearable:""},null,8,["modelValue"])])),_:1}),n(g,{style:{"margin-left":"10px"}},{default:r((()=>[n(w,{modelValue:s(i).placeName,"onUpdate:modelValue":l[5]||(l[5]=e=>s(i).placeName=e),placeholder:"产地",style:{width:"120px"},clearable:""},null,8,["modelValue"])])),_:1}),n(g,{style:{"margin-left":"10px"}},{default:r((()=>[n(t,{modelValue:s(i).upDownState,"onUpdate:modelValue":l[6]||(l[6]=e=>s(i).upDownState=e),placeholder:"上/下架",style:{width:"120px"},clearable:""},{default:r((()=>[n(a,{label:"未上架",value:0}),n(a,{label:"已上架",value:1})])),_:1},8,["modelValue"])])),_:1}),n(g,{style:{"margin-left":"10px"}},{default:r((()=>[n(t,{modelValue:s(i).isOverDate,"onUpdate:modelValue":l[7]||(l[7]=e=>s(i).isOverDate=e),placeholder:"已/未过期",style:{width:"120px"},clearable:""},{default:r((()=>[n(a,{label:"未过期",value:0}),n(a,{label:"已过期",value:1})])),_:1},8,["modelValue"])])),_:1}),n(g,{style:{"margin-left":"10px"}},{default:r((()=>[n(E,{type:"primary",onClick:N},{default:r((()=>[n(U,null,{default:r((()=>[Y])),_:1}),Z])),_:1})])),_:1})])),_:1}),p("div",null,[n(E,{type:"primary",onClick:l[8]||(l[8]=e=>{F.value.open(D,C,P,q,S,z)})},{default:r((()=>[n(U,null,{default:r((()=>[ee])),_:1}),le])),_:1}),n(E,{type:"warning",onClick:M},{default:r((()=>[n(U,null,{default:r((()=>[ae])),_:1}),te])),_:1}),n(E,{type:"primary",onClick:B},{default:r((()=>[ue])),_:1}),n(t,{placeholder:"批量操作",style:{width:"110px","margin-left":"12px",position:"relative",top:"2px"}},{default:r((()=>[n(a,{onClick:J},{default:r((()=>[p("span",oe,[n(U,null,{default:r((()=>[n(s(V))])),_:1})]),de])),_:1})])),_:1})])]),n(_e,{ref:j,data:f.value,onSelectionChange:H,style:{width:"100%","margin-top":"10px"},"table-layout":"auto",size:"large",border:"",stripe:""},{default:r((()=>[n(ve,{type:"selection",width:"55"}),n(ve,{label:"商品图片"},{default:r((e=>[n(ge,{style:{width:"60px",height:"60px"},src:s(h)+e.row.imgs,fit:"fill"},null,8,["src"])])),_:1}),n(ve,{prop:"productName",label:"商品名称",sortable:""}),n(ve,{prop:"brandName",label:"品牌",sortable:""}),n(ve,{prop:"typeName",label:"类型",sortable:""}),n(ve,{prop:"supplyName",label:"供应商",sortable:""}),n(ve,{prop:"placeName",label:"产地",sortable:""}),n(ve,{prop:"storeName",label:"仓库",sortable:""}),n(ve,{prop:"productInvent",label:"库存",sortable:""}),n(ve,{label:"上/下架",sortable:""},{default:r((e=>[p("span",null,v(0==e.row.upDownState?"未上架":"已上架"),1)])),_:1}),n(ve,{prop:"salePrice",label:"售价",sortable:""}),n(ve,{prop:"unitName",label:"单位",sortable:""}),n(ve,{prop:"productDate",label:"生产日期",sortable:""}),n(ve,{prop:"suppDate",label:"保质期",sortable:""}),n(ve,{label:"操作",fixed:"right",width:"240"},{default:r((e=>[0==e.row.upDownState?(o(),d(Ve,{key:0,type:"primary",onClick:_((l=>{return a=e.row,void L.value.open(a,D,C,P,q,S,z);var a}),["prevent"])},{default:r((()=>[re])),_:2},1032,["onClick"])):I("",!0),0==e.row.upDownState?(o(),d(Ve,{key:1,type:"primary",onClick:_((l=>{return a=e.row.productId,void x(`/product/product-delete/${a}`).then((e=>{y.success(e.message),N()}));var a}),["prevent"])},{default:r((()=>[pe])),_:2},1032,["onClick"])):I("",!0),0==e.row.upDownState?(o(),d(Ve,{key:2,type:"primary",onClick:l=>K(e.row.productId,1)},{default:r((()=>[ne])),_:2},1032,["onClick"])):I("",!0),1==e.row.upDownState?(o(),d(Ve,{key:3,type:"primary",onClick:l=>K(e.row.productId,0)},{default:r((()=>[se])),_:2},1032,["onClick"])):I("",!0),n(Ve,{type:"primary",onClick:_((l=>{return a=e.row,void R.value.open(a);var a}),["prevent"])},{default:r((()=>[me])),_:2},1032,["onClick"]),1==e.row.upDownState?(o(),d(Ve,{key:4,type:"primary",onClick:_((l=>{return a=e.row,void $.value.open(a);var a}),["prevent"])},{default:r((()=>[ie])),_:2},1032,["onClick"])):I("",!0),n(Ve,{type:"primary"},{default:r((()=>[ce])),_:1})])),_:1})])),_:1},8,["data"]),n(Ie,{background:"",total:s(i).totalNum,"page-sizes":[5,10,15,20,25,30],"page-size":s(i).pageSize,"onUpdate:page-size":l[9]||(l[9]=e=>s(i).pageSize=e),currentPage:s(i).pageNum,"onUpdate:currentPage":l[10]||(l[10]=e=>s(i).pageNum=e),layout:"total, sizes, prev, pager, next, jumper",style:{"margin-top":"20px"},onSizeChange:fe,onCurrentChange:ye},null,8,["total","page-size","currentPage"]),n(O,{ref:F,onOk:N},null,512),n(A,{ref:L,onOk:N},null,512),n(W,{ref:R,onOk:G},null,512),n(X,{ref:$,onOk:T},null,512)],64)}},__scopeId:"data-v-cf4312f0"};export default be;
